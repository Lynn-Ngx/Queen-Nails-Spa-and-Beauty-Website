{"version":3,"sources":["node_modules/browser-pack/_prelude.js","public/app/app.js","public/app/routes.js","public/app/views/controller/contactController.js","public/app/views/controller/mainController.js","public/app/views/directives/footer/footer.directive.js","public/app/views/directives/images/toggle/toggle.js","public/app/views/directives/navbar/navbar.js","public/app/views/directives/sidebar/sidebar.directive.js","public/app/views/directives/typewriter/typewriter.directive.js","public/app/views/pages/home/homeController.js"],"names":[],"mappings":"AAAA;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACnBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC7BA;AACA;AACA;AACA;AACA;AACA;AACA;;ACNA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC1CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AClBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACjBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACxGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACpBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AClFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"bundle.js","sourcesContent":["(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c=\"function\"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error(\"Cannot find module '\"+i+\"'\");throw a.code=\"MODULE_NOT_FOUND\",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u=\"function\"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()","require('angular');\nrequire('angular-route');\nrequire('angular-animate');\n\nrequire('./routes.js');\nrequire('./views/controller/contactController.js');\nrequire('./views/controller/mainController.js');\nrequire('./views/pages/home/homeController.js');\n\n//\nrequire('./views/directives/navbar/navbar.js');\nrequire('./views/directives/images/toggle/toggle.js');\nrequire('./views/directives/typewriter/typewriter.directive.js');\nrequire('./views/directives/footer/footer.directive.js');\n\nrequire('./views/directives/sidebar/sidebar.directive.js');\n\nangular.module('roomApp', ['routes', 'contactController', 'mainController', 'homeController', 'app.directives.navbar', 'app.directives.toggle', 'app.directives.typewriter', 'app.directives.sidebar', 'app.directives.customFooter'])\n\n","var app = angular.module('routes', ['ngRoute'])\n\n    .config(function ($routeProvider, $locationProvider) {\n\n        $routeProvider\n            .when('/', {\n                templateUrl: 'app/views/pages/home/home.html',\n                controller: 'homeCtrl',\n                controllerAs: 'home'\n            })\n            .when('/staff', {\n                templateUrl: 'app/views/pages/staff/staff.html'\n            })\n            .when('/services', {\n                templateUrl: 'app/views/pages/services/services.html'\n            })\n\n            .when('/contact', {\n                templateUrl: 'app/views/pages/contact/contact.html',\n                controller: 'contactCtrl',\n                controllerAs: 'contact'\n            })\n            .otherwise({redirectTo: '/'});\n\n        $locationProvider.html5Mode({\n            enabled: true,\n            requiredBase: false\n        });\n    });\n","angular.module('contactController', [])\n\n    .controller('contactCtrl', function($http, $location, $timeout, $rootScope){\n\n        const app = this;\n\n    });","angular.module('mainController', [])\n\n.controller('mainCtrl', function($rootScope, $scope, $location, $timeout, $http){\n\n    const app = this;\n\n    //      $rootScope.$on('$routeChangeStart', () => {\n    //\n    //      });\n\n\n    const test = () => {\n        console.log('test')\n    }\n\n    app.sendMail = (data) => {\n        console.log('mail', data)\n\n        $http.post('api/sendMail', data).then((data) => {\n\n            document.getElementById('emailNotSent').style.display = 'none'\n            document.getElementById('emailSent').style.display = 'block'\n\n\n\n        });\n\n    }\n\n    app.myMap = () => {\n        console.log('clicked')\n        var mapOptions = {\n            center: new google.maps.LatLng(51.5, -0.12),\n            zoom: 10,\n            mapTypeId: google.maps.MapTypeId.HYBRID\n        }\n        var map = new google.maps.Map(document.getElementById(\"map\"), mapOptions);\n    }\n\n    $rootScope.safeApply = function() {\n        if(!$rootScope.$$phase) $rootScope.$apply();\n    };\n});","/**\n * @numberOfFields needs to be updated as per amount of fields in less file\n * @mediaMaxWidth in less file should match the maxWidth in the directive controller\n */\n\nangular.module('app.directives.customFooter', [])\n    .directive('customFooter', function() {\n        return {\n            restrict: 'EA',\n            scope: {\n\n            },\n            templateUrl:  \"/app/views/directives/footer/footer.template.html\",\n            controller: function($scope, $rootScope){\n\n\n            }\n        }\n    });","angular.module('app.directives.toggle', [])\n    .directive('toggle', function() {\n        return {\n            restrict: 'EA',\n            scope: {\n                svgHeight: '@',\n                svgWidth: '@',\n                svgFill: '@'\n\n            },\n            templateUrl:  \"/app/views/directives/images/toggle/toggle.html\",\n            controller: function($scope){\n\n                console.log($scope)\n\n            }\n        }\n    });","/**\n * @numberOfFields needs to be updated as per amount of fields in less file\n * @mediaMaxWidth in less file should match the maxWidth in the directive controller\n */\n\nangular.module('app.directives.navbar', [])\n    .directive('navbar', function() {\n        return {\n            restrict: 'EA',\n            scope: {\n\n            },\n            templateUrl:  \"/app/views/directives/navbar/navbar.html\",\n            controller: function($scope, $rootScope){\n                let wrapperHasBeenHidden = false\n                const maxWdith = 700\n\n                $scope.fields = [\n                    {\n                        name: 'Home',\n                        href: '/'\n                    },\n                    {\n                        name: 'Prices',\n                        href: '/services'\n                    },\n                    {\n                        name: 'Gallery',\n                        href: '/staff'\n                    },\n                    {\n                        name: 'Contact Us',\n                        href: '/contact'\n                    }\n                ]\n\n\n                //get array of names of fields\n                const fields = ['Contact', 'Services', 'Location', 'Staff']\n                const url = window.location.href.split(\"/\")\n                const tempField =  url[url.length - 1].replace(/^\\w/, c => c.toUpperCase())\n                $scope.selectedField = (fields.includes(tempField)) ? tempField : 'Home'\n\n                const init = () => {\n                    const w = window.innerWidth || document.documentElement.clientWidth || document.body.clientWidth\n\n                    if (w <= maxWdith && !wrapperHasBeenHidden){\n                        document.getElementById('navbarWrapper').classList.toggle('hidden')\n                        wrapperHasBeenHidden = true\n                    }\n                }\n\n\n                init()\n\n                window.onresize = () => {\n                    const w = window.innerWidth || document.documentElement.clientWidth || document.body.clientWidth\n\n                    if (w <= maxWdith && !wrapperHasBeenHidden){\n                        document.getElementById('navbarWrapper').classList.toggle('hidden')\n                        wrapperHasBeenHidden = true\n                    }else if (w >= maxWdith && wrapperHasBeenHidden){\n                        wrapperHasBeenHidden = false\n                        document.getElementById('navbarWrapper').classList.remove('hidden')\n                        document.getElementById('navbarWrapper').classList.remove('un-hidden')\n                    }\n                }\n\n                $scope.fieldClicked = (fieldThatWsClicked) => {\n                    window.scrollTo(0,0)\n                    $scope.selectedField = fieldThatWsClicked\n                    const w = window.innerWidth || document.documentElement.clientWidth || document.body.clientWidth\n\n                    if (w <= maxWdith){\n                        hideNavbar()\n\n                    }\n                }\n\n                $scope.toggleNavbar = () => {\n                    if (document.getElementById('navbarWrapper').classList.contains('hidden')) showNavbar()\n                    else hideNavbar()\n                }\n\n                const hideNavbar = () => {\n                    document.getElementById('navbarWrapper').classList.remove('un-hidden')\n                    document.getElementById('navbarWrapper').classList.add('hidden')\n                }\n\n                const showNavbar = () => {\n                    document.getElementById('navbarWrapper').classList.remove('hidden')\n                    document.getElementById('navbarWrapper').classList.add('un-hidden')\n                }\n\n\n\n                $scope.scrollPosition = 0\n                window.addEventListener('scroll', (value) => {\n                    $scope.scrollPosition = window.pageYOffset\n                    $rootScope.safeApply()\n                })\n\n            }\n        }\n    });","angular.module('app.directives.sidebar', [])\n    .directive('sidebar', function() {\n        return {\n            restrict: 'EA',\n            scope: {\n\n            },\n            templateUrl:  \"/app/views/directives/sidebar/sidebar.template.html\",\n            controller: function($scope){\n\n                console.log('asdasdasd')\n                const init = () => {\n\n                }\n\n\n                init()\n\n            }\n        }\n    });","angular.module('app.directives.typewriter', [])\n    .directive('typewriter', function() {\n        return {\n            restrict: 'EA',\n            scope: {\n\n            },\n            templateUrl:  \"/app/views/directives/typewriter/typewriter.template.html\",\n            controller: function($scope){\n\n                const wordsToTypeWrite = [\n                    'a manicure',\n                    'a pedicure',\n                    'some waxing'\n                ]\n\n                $scope.currentTypedWord = ''\n\n\n                const delay = (time) => {\n                    return new Promise(resolve => {\n                        setTimeout(() => {\n                            resolve()\n                        }, time)\n                    })\n                }\n\n                const typeWriteWord = (word) => {\n                    return new Promise(resolve => {\n                        const lengthOfWord = word.length;\n                        let currentIndexOnWord = 0\n                        let incrementBy = 1\n\n                        const typewriting = setInterval(async () => {\n                            if (incrementBy === 1){\n                                if (currentIndexOnWord < lengthOfWord){\n                                    $scope.currentTypedWord += word[currentIndexOnWord]\n                                    currentIndexOnWord += incrementBy;\n                                }else {\n                                    incrementBy = -1\n                                    // await delay(1000)\n                                }\n\n                            }else {\n\n                                if (currentIndexOnWord > 0){\n                                    $scope.currentTypedWord = $scope.currentTypedWord.substring(0, $scope.currentTypedWord.length - 1)\n                                    currentIndexOnWord += incrementBy;\n                                }else {\n                                    clearInterval(typewriting)\n                                    resolve()\n                                }\n                            }\n\n                            $scope.$apply();\n\n\n                        }, 100)\n                    })\n                }\n\n                let indexOfCurrentWordTypewriting = 0;\n\n\n\n                const startTypescript = async() => {\n                    while(true){\n                        if (indexOfCurrentWordTypewriting === wordsToTypeWrite.length) {\n                            indexOfCurrentWordTypewriting = 0\n                        }\n\n                        await typeWriteWord(wordsToTypeWrite[indexOfCurrentWordTypewriting])\n                        indexOfCurrentWordTypewriting += 1\n                    }\n                }\n\n                startTypescript()\n\n\n\n            }\n        }\n    });","angular.module('homeController', [])\n\n    .controller('homeCtrl', function($rootScope, $scope, $location, $timeout, $http){\n\n    const app = this;\n\n\n    app.myMap = () => {\n        console.log('clicked')\n        var mapOptions = {\n            center: new google.maps.LatLng(53.2938549, -6.3557327),\n            zoom: 15,\n            mapTypeId: google.maps.MapTypeId.HYBRID\n        }\n        var map = new google.maps.Map(document.getElementById(\"map\"), mapOptions);\n    }\n\n    app.myMap()\n\n    $rootScope.safeApply = function() {\n        if(!$rootScope.$$phase) $rootScope.$apply();\n    };\n});"],"preExistingComment":"//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJwdWJsaWMvYXBwL2FwcC5qcyIsInB1YmxpYy9hcHAvcm91dGVzLmpzIiwicHVibGljL2FwcC92aWV3cy9jb250cm9sbGVyL2NvbnRhY3RDb250cm9sbGVyLmpzIiwicHVibGljL2FwcC92aWV3cy9jb250cm9sbGVyL21haW5Db250cm9sbGVyLmpzIiwicHVibGljL2FwcC92aWV3cy9kaXJlY3RpdmVzL2Zvb3Rlci9mb290ZXIuZGlyZWN0aXZlLmpzIiwicHVibGljL2FwcC92aWV3cy9kaXJlY3RpdmVzL2ltYWdlcy90b2dnbGUvdG9nZ2xlLmpzIiwicHVibGljL2FwcC92aWV3cy9kaXJlY3RpdmVzL25hdmJhci9uYXZiYXIuanMiLCJwdWJsaWMvYXBwL3ZpZXdzL2RpcmVjdGl2ZXMvc2lkZWJhci9zaWRlYmFyLmRpcmVjdGl2ZS5qcyIsInB1YmxpYy9hcHAvdmlld3MvZGlyZWN0aXZlcy90eXBld3JpdGVyL3R5cGV3cml0ZXIuZGlyZWN0aXZlLmpzIiwicHVibGljL2FwcC92aWV3cy9wYWdlcy9ob21lL2hvbWVDb250cm9sbGVyLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0FDQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNuQkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQzdCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNOQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUMxQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDbEJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNqQkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3hHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDcEJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDbEZBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJmaWxlIjoiZ2VuZXJhdGVkLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbigpe2Z1bmN0aW9uIHIoZSxuLHQpe2Z1bmN0aW9uIG8oaSxmKXtpZighbltpXSl7aWYoIWVbaV0pe3ZhciBjPVwiZnVuY3Rpb25cIj09dHlwZW9mIHJlcXVpcmUmJnJlcXVpcmU7aWYoIWYmJmMpcmV0dXJuIGMoaSwhMCk7aWYodSlyZXR1cm4gdShpLCEwKTt2YXIgYT1uZXcgRXJyb3IoXCJDYW5ub3QgZmluZCBtb2R1bGUgJ1wiK2krXCInXCIpO3Rocm93IGEuY29kZT1cIk1PRFVMRV9OT1RfRk9VTkRcIixhfXZhciBwPW5baV09e2V4cG9ydHM6e319O2VbaV1bMF0uY2FsbChwLmV4cG9ydHMsZnVuY3Rpb24ocil7dmFyIG49ZVtpXVsxXVtyXTtyZXR1cm4gbyhufHxyKX0scCxwLmV4cG9ydHMscixlLG4sdCl9cmV0dXJuIG5baV0uZXhwb3J0c31mb3IodmFyIHU9XCJmdW5jdGlvblwiPT10eXBlb2YgcmVxdWlyZSYmcmVxdWlyZSxpPTA7aTx0Lmxlbmd0aDtpKyspbyh0W2ldKTtyZXR1cm4gb31yZXR1cm4gcn0pKCkiLCJyZXF1aXJlKCdhbmd1bGFyJyk7XG5yZXF1aXJlKCdhbmd1bGFyLXJvdXRlJyk7XG5yZXF1aXJlKCdhbmd1bGFyLWFuaW1hdGUnKTtcblxucmVxdWlyZSgnLi9yb3V0ZXMuanMnKTtcbnJlcXVpcmUoJy4vdmlld3MvY29udHJvbGxlci9jb250YWN0Q29udHJvbGxlci5qcycpO1xucmVxdWlyZSgnLi92aWV3cy9jb250cm9sbGVyL21haW5Db250cm9sbGVyLmpzJyk7XG5yZXF1aXJlKCcuL3ZpZXdzL3BhZ2VzL2hvbWUvaG9tZUNvbnRyb2xsZXIuanMnKTtcblxuLy9cbnJlcXVpcmUoJy4vdmlld3MvZGlyZWN0aXZlcy9uYXZiYXIvbmF2YmFyLmpzJyk7XG5yZXF1aXJlKCcuL3ZpZXdzL2RpcmVjdGl2ZXMvaW1hZ2VzL3RvZ2dsZS90b2dnbGUuanMnKTtcbnJlcXVpcmUoJy4vdmlld3MvZGlyZWN0aXZlcy90eXBld3JpdGVyL3R5cGV3cml0ZXIuZGlyZWN0aXZlLmpzJyk7XG5yZXF1aXJlKCcuL3ZpZXdzL2RpcmVjdGl2ZXMvZm9vdGVyL2Zvb3Rlci5kaXJlY3RpdmUuanMnKTtcblxucmVxdWlyZSgnLi92aWV3cy9kaXJlY3RpdmVzL3NpZGViYXIvc2lkZWJhci5kaXJlY3RpdmUuanMnKTtcblxuYW5ndWxhci5tb2R1bGUoJ3Jvb21BcHAnLCBbJ3JvdXRlcycsICdjb250YWN0Q29udHJvbGxlcicsICdtYWluQ29udHJvbGxlcicsICdob21lQ29udHJvbGxlcicsICdhcHAuZGlyZWN0aXZlcy5uYXZiYXInLCAnYXBwLmRpcmVjdGl2ZXMudG9nZ2xlJywgJ2FwcC5kaXJlY3RpdmVzLnR5cGV3cml0ZXInLCAnYXBwLmRpcmVjdGl2ZXMuc2lkZWJhcicsICdhcHAuZGlyZWN0aXZlcy5jdXN0b21Gb290ZXInXSlcblxuIiwidmFyIGFwcCA9IGFuZ3VsYXIubW9kdWxlKCdyb3V0ZXMnLCBbJ25nUm91dGUnXSlcblxuICAgIC5jb25maWcoZnVuY3Rpb24gKCRyb3V0ZVByb3ZpZGVyLCAkbG9jYXRpb25Qcm92aWRlcikge1xuXG4gICAgICAgICRyb3V0ZVByb3ZpZGVyXG4gICAgICAgICAgICAud2hlbignLycsIHtcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ2FwcC92aWV3cy9wYWdlcy9ob21lL2hvbWUuaHRtbCcsXG4gICAgICAgICAgICAgICAgY29udHJvbGxlcjogJ2hvbWVDdHJsJyxcbiAgICAgICAgICAgICAgICBjb250cm9sbGVyQXM6ICdob21lJ1xuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIC53aGVuKCcvc3RhZmYnLCB7XG4gICAgICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICdhcHAvdmlld3MvcGFnZXMvc3RhZmYvc3RhZmYuaHRtbCdcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAud2hlbignL3NlcnZpY2VzJywge1xuICAgICAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnYXBwL3ZpZXdzL3BhZ2VzL3NlcnZpY2VzL3NlcnZpY2VzLmh0bWwnXG4gICAgICAgICAgICB9KVxuXG4gICAgICAgICAgICAud2hlbignL2NvbnRhY3QnLCB7XG4gICAgICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICdhcHAvdmlld3MvcGFnZXMvY29udGFjdC9jb250YWN0Lmh0bWwnLFxuICAgICAgICAgICAgICAgIGNvbnRyb2xsZXI6ICdjb250YWN0Q3RybCcsXG4gICAgICAgICAgICAgICAgY29udHJvbGxlckFzOiAnY29udGFjdCdcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAub3RoZXJ3aXNlKHtyZWRpcmVjdFRvOiAnLyd9KTtcblxuICAgICAgICAkbG9jYXRpb25Qcm92aWRlci5odG1sNU1vZGUoe1xuICAgICAgICAgICAgZW5hYmxlZDogdHJ1ZSxcbiAgICAgICAgICAgIHJlcXVpcmVkQmFzZTogZmFsc2VcbiAgICAgICAgfSk7XG4gICAgfSk7XG4iLCJhbmd1bGFyLm1vZHVsZSgnY29udGFjdENvbnRyb2xsZXInLCBbXSlcblxuICAgIC5jb250cm9sbGVyKCdjb250YWN0Q3RybCcsIGZ1bmN0aW9uKCRodHRwLCAkbG9jYXRpb24sICR0aW1lb3V0LCAkcm9vdFNjb3BlKXtcblxuICAgICAgICBjb25zdCBhcHAgPSB0aGlzO1xuXG4gICAgfSk7IiwiYW5ndWxhci5tb2R1bGUoJ21haW5Db250cm9sbGVyJywgW10pXG5cbi5jb250cm9sbGVyKCdtYWluQ3RybCcsIGZ1bmN0aW9uKCRyb290U2NvcGUsICRzY29wZSwgJGxvY2F0aW9uLCAkdGltZW91dCwgJGh0dHApe1xuXG4gICAgY29uc3QgYXBwID0gdGhpcztcblxuICAgIC8vICAgICAgJHJvb3RTY29wZS4kb24oJyRyb3V0ZUNoYW5nZVN0YXJ0JywgKCkgPT4ge1xuICAgIC8vXG4gICAgLy8gICAgICB9KTtcblxuXG4gICAgY29uc3QgdGVzdCA9ICgpID0+IHtcbiAgICAgICAgY29uc29sZS5sb2coJ3Rlc3QnKVxuICAgIH1cblxuICAgIGFwcC5zZW5kTWFpbCA9IChkYXRhKSA9PiB7XG4gICAgICAgIGNvbnNvbGUubG9nKCdtYWlsJywgZGF0YSlcblxuICAgICAgICAkaHR0cC5wb3N0KCdhcGkvc2VuZE1haWwnLCBkYXRhKS50aGVuKChkYXRhKSA9PiB7XG5cbiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdlbWFpbE5vdFNlbnQnKS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnXG4gICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZW1haWxTZW50Jykuc3R5bGUuZGlzcGxheSA9ICdibG9jaydcblxuXG5cbiAgICAgICAgfSk7XG5cbiAgICB9XG5cbiAgICBhcHAubXlNYXAgPSAoKSA9PiB7XG4gICAgICAgIGNvbnNvbGUubG9nKCdjbGlja2VkJylcbiAgICAgICAgdmFyIG1hcE9wdGlvbnMgPSB7XG4gICAgICAgICAgICBjZW50ZXI6IG5ldyBnb29nbGUubWFwcy5MYXRMbmcoNTEuNSwgLTAuMTIpLFxuICAgICAgICAgICAgem9vbTogMTAsXG4gICAgICAgICAgICBtYXBUeXBlSWQ6IGdvb2dsZS5tYXBzLk1hcFR5cGVJZC5IWUJSSURcbiAgICAgICAgfVxuICAgICAgICB2YXIgbWFwID0gbmV3IGdvb2dsZS5tYXBzLk1hcChkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcIm1hcFwiKSwgbWFwT3B0aW9ucyk7XG4gICAgfVxuXG4gICAgJHJvb3RTY29wZS5zYWZlQXBwbHkgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgaWYoISRyb290U2NvcGUuJCRwaGFzZSkgJHJvb3RTY29wZS4kYXBwbHkoKTtcbiAgICB9O1xufSk7IiwiLyoqXG4gKiBAbnVtYmVyT2ZGaWVsZHMgbmVlZHMgdG8gYmUgdXBkYXRlZCBhcyBwZXIgYW1vdW50IG9mIGZpZWxkcyBpbiBsZXNzIGZpbGVcbiAqIEBtZWRpYU1heFdpZHRoIGluIGxlc3MgZmlsZSBzaG91bGQgbWF0Y2ggdGhlIG1heFdpZHRoIGluIHRoZSBkaXJlY3RpdmUgY29udHJvbGxlclxuICovXG5cbmFuZ3VsYXIubW9kdWxlKCdhcHAuZGlyZWN0aXZlcy5jdXN0b21Gb290ZXInLCBbXSlcbiAgICAuZGlyZWN0aXZlKCdjdXN0b21Gb290ZXInLCBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHJlc3RyaWN0OiAnRUEnLFxuICAgICAgICAgICAgc2NvcGU6IHtcblxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAgXCIvYXBwL3ZpZXdzL2RpcmVjdGl2ZXMvZm9vdGVyL2Zvb3Rlci50ZW1wbGF0ZS5odG1sXCIsXG4gICAgICAgICAgICBjb250cm9sbGVyOiBmdW5jdGlvbigkc2NvcGUsICRyb290U2NvcGUpe1xuXG5cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH0pOyIsImFuZ3VsYXIubW9kdWxlKCdhcHAuZGlyZWN0aXZlcy50b2dnbGUnLCBbXSlcbiAgICAuZGlyZWN0aXZlKCd0b2dnbGUnLCBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHJlc3RyaWN0OiAnRUEnLFxuICAgICAgICAgICAgc2NvcGU6IHtcbiAgICAgICAgICAgICAgICBzdmdIZWlnaHQ6ICdAJyxcbiAgICAgICAgICAgICAgICBzdmdXaWR0aDogJ0AnLFxuICAgICAgICAgICAgICAgIHN2Z0ZpbGw6ICdAJ1xuXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICBcIi9hcHAvdmlld3MvZGlyZWN0aXZlcy9pbWFnZXMvdG9nZ2xlL3RvZ2dsZS5odG1sXCIsXG4gICAgICAgICAgICBjb250cm9sbGVyOiBmdW5jdGlvbigkc2NvcGUpe1xuXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJHNjb3BlKVxuXG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9KTsiLCIvKipcbiAqIEBudW1iZXJPZkZpZWxkcyBuZWVkcyB0byBiZSB1cGRhdGVkIGFzIHBlciBhbW91bnQgb2YgZmllbGRzIGluIGxlc3MgZmlsZVxuICogQG1lZGlhTWF4V2lkdGggaW4gbGVzcyBmaWxlIHNob3VsZCBtYXRjaCB0aGUgbWF4V2lkdGggaW4gdGhlIGRpcmVjdGl2ZSBjb250cm9sbGVyXG4gKi9cblxuYW5ndWxhci5tb2R1bGUoJ2FwcC5kaXJlY3RpdmVzLm5hdmJhcicsIFtdKVxuICAgIC5kaXJlY3RpdmUoJ25hdmJhcicsIGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgcmVzdHJpY3Q6ICdFQScsXG4gICAgICAgICAgICBzY29wZToge1xuXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICBcIi9hcHAvdmlld3MvZGlyZWN0aXZlcy9uYXZiYXIvbmF2YmFyLmh0bWxcIixcbiAgICAgICAgICAgIGNvbnRyb2xsZXI6IGZ1bmN0aW9uKCRzY29wZSwgJHJvb3RTY29wZSl7XG4gICAgICAgICAgICAgICAgbGV0IHdyYXBwZXJIYXNCZWVuSGlkZGVuID0gZmFsc2VcbiAgICAgICAgICAgICAgICBjb25zdCBtYXhXZGl0aCA9IDcwMFxuXG4gICAgICAgICAgICAgICAgJHNjb3BlLmZpZWxkcyA9IFtcbiAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogJ0hvbWUnLFxuICAgICAgICAgICAgICAgICAgICAgICAgaHJlZjogJy8nXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6ICdQcmljZXMnLFxuICAgICAgICAgICAgICAgICAgICAgICAgaHJlZjogJy9zZXJ2aWNlcydcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogJ0dhbGxlcnknLFxuICAgICAgICAgICAgICAgICAgICAgICAgaHJlZjogJy9zdGFmZidcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogJ0NvbnRhY3QgVXMnLFxuICAgICAgICAgICAgICAgICAgICAgICAgaHJlZjogJy9jb250YWN0J1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgXVxuXG5cbiAgICAgICAgICAgICAgICAvL2dldCBhcnJheSBvZiBuYW1lcyBvZiBmaWVsZHNcbiAgICAgICAgICAgICAgICBjb25zdCBmaWVsZHMgPSBbJ0NvbnRhY3QnLCAnU2VydmljZXMnLCAnTG9jYXRpb24nLCAnU3RhZmYnXVxuICAgICAgICAgICAgICAgIGNvbnN0IHVybCA9IHdpbmRvdy5sb2NhdGlvbi5ocmVmLnNwbGl0KFwiL1wiKVxuICAgICAgICAgICAgICAgIGNvbnN0IHRlbXBGaWVsZCA9ICB1cmxbdXJsLmxlbmd0aCAtIDFdLnJlcGxhY2UoL15cXHcvLCBjID0+IGMudG9VcHBlckNhc2UoKSlcbiAgICAgICAgICAgICAgICAkc2NvcGUuc2VsZWN0ZWRGaWVsZCA9IChmaWVsZHMuaW5jbHVkZXModGVtcEZpZWxkKSkgPyB0ZW1wRmllbGQgOiAnSG9tZSdcblxuICAgICAgICAgICAgICAgIGNvbnN0IGluaXQgPSAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHcgPSB3aW5kb3cuaW5uZXJXaWR0aCB8fCBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY2xpZW50V2lkdGggfHwgZG9jdW1lbnQuYm9keS5jbGllbnRXaWR0aFxuXG4gICAgICAgICAgICAgICAgICAgIGlmICh3IDw9IG1heFdkaXRoICYmICF3cmFwcGVySGFzQmVlbkhpZGRlbil7XG4gICAgICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbmF2YmFyV3JhcHBlcicpLmNsYXNzTGlzdC50b2dnbGUoJ2hpZGRlbicpXG4gICAgICAgICAgICAgICAgICAgICAgICB3cmFwcGVySGFzQmVlbkhpZGRlbiA9IHRydWVcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cblxuXG4gICAgICAgICAgICAgICAgaW5pdCgpXG5cbiAgICAgICAgICAgICAgICB3aW5kb3cub25yZXNpemUgPSAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHcgPSB3aW5kb3cuaW5uZXJXaWR0aCB8fCBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY2xpZW50V2lkdGggfHwgZG9jdW1lbnQuYm9keS5jbGllbnRXaWR0aFxuXG4gICAgICAgICAgICAgICAgICAgIGlmICh3IDw9IG1heFdkaXRoICYmICF3cmFwcGVySGFzQmVlbkhpZGRlbil7XG4gICAgICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbmF2YmFyV3JhcHBlcicpLmNsYXNzTGlzdC50b2dnbGUoJ2hpZGRlbicpXG4gICAgICAgICAgICAgICAgICAgICAgICB3cmFwcGVySGFzQmVlbkhpZGRlbiA9IHRydWVcbiAgICAgICAgICAgICAgICAgICAgfWVsc2UgaWYgKHcgPj0gbWF4V2RpdGggJiYgd3JhcHBlckhhc0JlZW5IaWRkZW4pe1xuICAgICAgICAgICAgICAgICAgICAgICAgd3JhcHBlckhhc0JlZW5IaWRkZW4gPSBmYWxzZVxuICAgICAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ25hdmJhcldyYXBwZXInKS5jbGFzc0xpc3QucmVtb3ZlKCdoaWRkZW4nKVxuICAgICAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ25hdmJhcldyYXBwZXInKS5jbGFzc0xpc3QucmVtb3ZlKCd1bi1oaWRkZW4nKVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgJHNjb3BlLmZpZWxkQ2xpY2tlZCA9IChmaWVsZFRoYXRXc0NsaWNrZWQpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgd2luZG93LnNjcm9sbFRvKDAsMClcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnNlbGVjdGVkRmllbGQgPSBmaWVsZFRoYXRXc0NsaWNrZWRcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgdyA9IHdpbmRvdy5pbm5lcldpZHRoIHx8IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5jbGllbnRXaWR0aCB8fCBkb2N1bWVudC5ib2R5LmNsaWVudFdpZHRoXG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKHcgPD0gbWF4V2RpdGgpe1xuICAgICAgICAgICAgICAgICAgICAgICAgaGlkZU5hdmJhcigpXG5cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICRzY29wZS50b2dnbGVOYXZiYXIgPSAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbmF2YmFyV3JhcHBlcicpLmNsYXNzTGlzdC5jb250YWlucygnaGlkZGVuJykpIHNob3dOYXZiYXIoKVxuICAgICAgICAgICAgICAgICAgICBlbHNlIGhpZGVOYXZiYXIoKVxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGNvbnN0IGhpZGVOYXZiYXIgPSAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCduYXZiYXJXcmFwcGVyJykuY2xhc3NMaXN0LnJlbW92ZSgndW4taGlkZGVuJylcbiAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ25hdmJhcldyYXBwZXInKS5jbGFzc0xpc3QuYWRkKCdoaWRkZW4nKVxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGNvbnN0IHNob3dOYXZiYXIgPSAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCduYXZiYXJXcmFwcGVyJykuY2xhc3NMaXN0LnJlbW92ZSgnaGlkZGVuJylcbiAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ25hdmJhcldyYXBwZXInKS5jbGFzc0xpc3QuYWRkKCd1bi1oaWRkZW4nKVxuICAgICAgICAgICAgICAgIH1cblxuXG5cbiAgICAgICAgICAgICAgICAkc2NvcGUuc2Nyb2xsUG9zaXRpb24gPSAwXG4gICAgICAgICAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3Njcm9sbCcsICh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAkc2NvcGUuc2Nyb2xsUG9zaXRpb24gPSB3aW5kb3cucGFnZVlPZmZzZXRcbiAgICAgICAgICAgICAgICAgICAgJHJvb3RTY29wZS5zYWZlQXBwbHkoKVxuICAgICAgICAgICAgICAgIH0pXG5cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH0pOyIsImFuZ3VsYXIubW9kdWxlKCdhcHAuZGlyZWN0aXZlcy5zaWRlYmFyJywgW10pXG4gICAgLmRpcmVjdGl2ZSgnc2lkZWJhcicsIGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgcmVzdHJpY3Q6ICdFQScsXG4gICAgICAgICAgICBzY29wZToge1xuXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICBcIi9hcHAvdmlld3MvZGlyZWN0aXZlcy9zaWRlYmFyL3NpZGViYXIudGVtcGxhdGUuaHRtbFwiLFxuICAgICAgICAgICAgY29udHJvbGxlcjogZnVuY3Rpb24oJHNjb3BlKXtcblxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdhc2Rhc2Rhc2QnKVxuICAgICAgICAgICAgICAgIGNvbnN0IGluaXQgPSAoKSA9PiB7XG5cbiAgICAgICAgICAgICAgICB9XG5cblxuICAgICAgICAgICAgICAgIGluaXQoKVxuXG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9KTsiLCJhbmd1bGFyLm1vZHVsZSgnYXBwLmRpcmVjdGl2ZXMudHlwZXdyaXRlcicsIFtdKVxuICAgIC5kaXJlY3RpdmUoJ3R5cGV3cml0ZXInLCBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHJlc3RyaWN0OiAnRUEnLFxuICAgICAgICAgICAgc2NvcGU6IHtcblxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAgXCIvYXBwL3ZpZXdzL2RpcmVjdGl2ZXMvdHlwZXdyaXRlci90eXBld3JpdGVyLnRlbXBsYXRlLmh0bWxcIixcbiAgICAgICAgICAgIGNvbnRyb2xsZXI6IGZ1bmN0aW9uKCRzY29wZSl7XG5cbiAgICAgICAgICAgICAgICBjb25zdCB3b3Jkc1RvVHlwZVdyaXRlID0gW1xuICAgICAgICAgICAgICAgICAgICAnYSBtYW5pY3VyZScsXG4gICAgICAgICAgICAgICAgICAgICdhIHBlZGljdXJlJyxcbiAgICAgICAgICAgICAgICAgICAgJ3NvbWUgd2F4aW5nJ1xuICAgICAgICAgICAgICAgIF1cblxuICAgICAgICAgICAgICAgICRzY29wZS5jdXJyZW50VHlwZWRXb3JkID0gJydcblxuXG4gICAgICAgICAgICAgICAgY29uc3QgZGVsYXkgPSAodGltZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmV3IFByb21pc2UocmVzb2x2ZSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXNvbHZlKClcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sIHRpbWUpXG4gICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgY29uc3QgdHlwZVdyaXRlV29yZCA9ICh3b3JkKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGxlbmd0aE9mV29yZCA9IHdvcmQubGVuZ3RoO1xuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGN1cnJlbnRJbmRleE9uV29yZCA9IDBcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBpbmNyZW1lbnRCeSA9IDFcblxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdHlwZXdyaXRpbmcgPSBzZXRJbnRlcnZhbChhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGluY3JlbWVudEJ5ID09PSAxKXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGN1cnJlbnRJbmRleE9uV29yZCA8IGxlbmd0aE9mV29yZCl7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuY3VycmVudFR5cGVkV29yZCArPSB3b3JkW2N1cnJlbnRJbmRleE9uV29yZF1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRJbmRleE9uV29yZCArPSBpbmNyZW1lbnRCeTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfWVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5jcmVtZW50QnkgPSAtMVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gYXdhaXQgZGVsYXkoMTAwMClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfWVsc2Uge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjdXJyZW50SW5kZXhPbldvcmQgPiAwKXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5jdXJyZW50VHlwZWRXb3JkID0gJHNjb3BlLmN1cnJlbnRUeXBlZFdvcmQuc3Vic3RyaW5nKDAsICRzY29wZS5jdXJyZW50VHlwZWRXb3JkLmxlbmd0aCAtIDEpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50SW5kZXhPbldvcmQgKz0gaW5jcmVtZW50Qnk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1lbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsZWFySW50ZXJ2YWwodHlwZXdyaXRpbmcpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXNvbHZlKClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS4kYXBwbHkoKTtcblxuXG4gICAgICAgICAgICAgICAgICAgICAgICB9LCAxMDApXG4gICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgbGV0IGluZGV4T2ZDdXJyZW50V29yZFR5cGV3cml0aW5nID0gMDtcblxuXG5cbiAgICAgICAgICAgICAgICBjb25zdCBzdGFydFR5cGVzY3JpcHQgPSBhc3luYygpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgd2hpbGUodHJ1ZSl7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoaW5kZXhPZkN1cnJlbnRXb3JkVHlwZXdyaXRpbmcgPT09IHdvcmRzVG9UeXBlV3JpdGUubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5kZXhPZkN1cnJlbnRXb3JkVHlwZXdyaXRpbmcgPSAwXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHR5cGVXcml0ZVdvcmQod29yZHNUb1R5cGVXcml0ZVtpbmRleE9mQ3VycmVudFdvcmRUeXBld3JpdGluZ10pXG4gICAgICAgICAgICAgICAgICAgICAgICBpbmRleE9mQ3VycmVudFdvcmRUeXBld3JpdGluZyArPSAxXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBzdGFydFR5cGVzY3JpcHQoKVxuXG5cblxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfSk7IiwiYW5ndWxhci5tb2R1bGUoJ2hvbWVDb250cm9sbGVyJywgW10pXG5cbiAgICAuY29udHJvbGxlcignaG9tZUN0cmwnLCBmdW5jdGlvbigkcm9vdFNjb3BlLCAkc2NvcGUsICRsb2NhdGlvbiwgJHRpbWVvdXQsICRodHRwKXtcblxuICAgIGNvbnN0IGFwcCA9IHRoaXM7XG5cblxuICAgIGFwcC5teU1hcCA9ICgpID0+IHtcbiAgICAgICAgY29uc29sZS5sb2coJ2NsaWNrZWQnKVxuICAgICAgICB2YXIgbWFwT3B0aW9ucyA9IHtcbiAgICAgICAgICAgIGNlbnRlcjogbmV3IGdvb2dsZS5tYXBzLkxhdExuZyg1My4yOTM4NTQ5LCAtNi4zNTU3MzI3KSxcbiAgICAgICAgICAgIHpvb206IDE1LFxuICAgICAgICAgICAgbWFwVHlwZUlkOiBnb29nbGUubWFwcy5NYXBUeXBlSWQuSFlCUklEXG4gICAgICAgIH1cbiAgICAgICAgdmFyIG1hcCA9IG5ldyBnb29nbGUubWFwcy5NYXAoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJtYXBcIiksIG1hcE9wdGlvbnMpO1xuICAgIH1cblxuICAgIGFwcC5teU1hcCgpXG5cbiAgICAkcm9vdFNjb3BlLnNhZmVBcHBseSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICBpZighJHJvb3RTY29wZS4kJHBoYXNlKSAkcm9vdFNjb3BlLiRhcHBseSgpO1xuICAgIH07XG59KTsiXX0="}